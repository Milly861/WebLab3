<% provide(:title, "About") %>
<h1>About</h1>

<p>
  The <a href="https://www.railstutorial.org/"><em>Ruby on Rails Tutorial</em></a>,
  by <a href="https://www.michaelhartl.com/">Michael Hartl</a>, is a
  <a href="https://www.railstutorial.org/book">book</a> and
  <a href="https://screencasts.railstutorial.org/">screencast series</a>
  to teach web development with
  <a href="https://rubyonrails.org/">Ruby on Rails</a>.
  This is the sample application for the tutorial.
</p>

<hr style="margin: 40px 0; border: 0; border-top: 1px solid #ddd;">

<h2>Пользователи в системе (<%= @users.count %>)</h2>

<% if @users.any? %>
  <div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.95em;">
      <thead>
        <tr style="background-color: #f7f7f7; text-align: left;">
          <th style="padding: 12px; border-bottom: 2px solid #ddd;">ID</th>
          <th style="padding: 12px; border-bottom: 2px solid #ddd;">Имя</th>
          <th style="padding: 12px; border-bottom: 2px solid #ddd;">Email</th>
          <th style="padding: 12px; border-bottom: 2px solid #ddd;">Создан</th>
          <th style="padding: 12px; border-bottom: 2px solid #ddd;">Обновлён</th>
          <th style="padding: 12px; border-bottom: 2px solid #ddd;">Пароль (хэш)</th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |user| %>
          <tr style="background-color: <%= cycle('#ffffff', '#f9f9f9') %>;">
            <td style="padding: 10px; border-bottom: 1px solid #eee;"><%= user.id %></td>
            <td style="padding: 10px; border-bottom: 1px solid #eee; font-weight: bold;"><%= user.name %></td>
            <td style="padding: 10px; border-bottom: 1px solid #eee;"><%= user.email %></td>
            <td style="padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9em;">
              <%= l(user.created_at, format: :short) rescue user.created_at.strftime("%d.%m.%Y %H:%M") %>
            </td>
            <td style="padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9em;">
              <%= l(user.updated_at, format: :short) rescue user.updated_at.strftime("%d.%m.%Y %H:%M") %>
            </td>
            <td style="padding: 10px; border-bottom: 1px solid #eee; font-family: monospace; font-size: 0.75em; color: #666;">
              <%= truncate(user.password_digest, length: 40) %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <p style="margin-top: 20px; color: #666; font-size: 0.9em;">
    Всего пользователей: <strong><%= @users.count %></strong> | 
    Последний: <%= @users.first.name %> (<%= time_ago_in_words(@users.first.created_at) %> назад)
  </p>
<% else %>
  <p><em>Пока нет зарегистрированных пользователей.</em></p>
<% end %>

<hr style="margin: 40px 0; border: 0; border-top: 1px solid #ddd;">

<p style="font-size: 0.9em; color: #888;">
  Это временная отладочная таблица — в будущем она будет доступна только администраторам.
</p>